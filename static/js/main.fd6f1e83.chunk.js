(this["webpackJsonpnutri-nav"]=this["webpackJsonpnutri-nav"]||[]).push([[0],{44:function(e,t,a){e.exports=a.p+"static/media/nutriNavLogo.ba2638de.svg"},47:function(e,t,a){e.exports=a(91)},52:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(43),i=a.n(o),s=(a(52),a(26)),c=a(28),l=a(3),m=a(4),u=a(6),d=a(5),p=a(7),v=a(15),h=a(18),f=a(25),E=a.n(f),g=a(12),N=a(13),b=a(44),y=a.n(b),C=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"navigation"},r.a.createElement("div",{className:"wrapper"},r.a.createElement("nav",null,r.a.createElement("ul",{className:"navContainer"},r.a.createElement("div",{className:"navList"},r.a.createElement("li",{className:"navItem",title:"Go to Homepage","aria-label":"Go to Homepage"},r.a.createElement(v.c,{activeClassName:"activeNav",to:"/",exact:!0,onClick:this.props.resetFilter},r.a.createElement(g.a,{icon:N.c}))),r.a.createElement("li",{className:"navItem",title:"Go to Favourited Items Page","aria-label":"Go to Favourited Items Page"},r.a.createElement(v.c,{activeClassName:"activeNav",to:"/favourites",onClick:this.props.resetFilter},r.a.createElement(g.a,{icon:N.b})))),r.a.createElement("div",{className:"navList"},r.a.createElement("li",{className:"navLogo",title:"Go to Homepage","aria-label":"Go to Homepage"},r.a.createElement(v.c,{activeClassName:"activeNav",to:"/",exact:!0,onClick:this.props.resetFilter},r.a.createElement("img",{src:y.a,alt:""})))),r.a.createElement("div",{className:"navList"},r.a.createElement("li",{className:"nav-icon navItem",title:"Go to Search Page","aria-label":"Go to Search Page"},r.a.createElement(v.c,{activeClassName:"activeNav",to:"/",exact:!0,onClick:this.props.resetFilter},r.a.createElement(g.a,{icon:N.d}))),r.a.createElement("li",{className:"nav-icon navItem",title:"Go to Food Comparing Page","aria-label":"Go to Food Comparing Page"},r.a.createElement(v.c,{activeClassName:"activeNav",to:"/compare",onClick:this.props.resetFilter}," ",r.a.createElement(g.a,{icon:N.a}))))))))}}]),t}(n.Component),F=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.props.foodItem.id;t=encodeURI(t);var a=this.props.foodItem.brand?"branded":"common";return r.a.createElement("div",{className:"foodCard favourite"},r.a.createElement(v.b,{className:"favouriteCardLink",to:"/food/".concat(a,"/").concat(t)},r.a.createElement("div",{className:"favCard"},r.a.createElement("div",{className:"cardImage"},r.a.createElement("img",{src:this.props.foodItem.imgURL,alt:this.props.foodItem.name})),r.a.createElement("div",{className:"cardContent"},r.a.createElement("h2",{className:"cardTitle"},this.props.foodItem.brand?this.props.foodItem.brand:this.props.foodItem.name),this.props.foodItem.brand?r.a.createElement("h3",{className:"cardSubtitle"},this.props.foodItem.name):null))),r.a.createElement("button",{title:"Click to Remove","aria-label":"Click to Remove from Favourites",onClick:function(){e.props.removeItem(e.props.foodItem.key,"userFavourites")}},r.a.createElement(g.a,{className:"deleteIcon",icon:N.f})))}}]),t}(n.Component),I=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"foodContainer"},this.props.foodItems.map((function(t,a){return r.a.createElement(F,{removeItem:e.props.removeItem,key:a,foodItem:t})})))}}]),t}(n.Component),k=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={term:""},e}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"favourites"},r.a.createElement(C,{resetFilter:this.props.resetFilter}),r.a.createElement("div",{className:"pageContainer"},r.a.createElement("div",{className:"wrapper"},r.a.createElement("h1",{className:"pageTitle"},"Saved Items"),r.a.createElement("div",{className:"pageFilter"},r.a.createElement("label",{htmlFor:"filter"}),r.a.createElement("input",{type:"text",id:"filter",placeholder:"Filter by Name",onKeyUp:function(t){e.props.updateFilterString(t.target.value)}})),r.a.createElement(I,{foodItems:this.props.savedFoods,removeItem:this.props.removeItem}))))}}]),t}(n.Component),O=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).removeFocus=function(e){e.target.blur()},a.state={food:{},foodType:a.props.type,isReady:!1},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.getDetails(this.props.id,this.props.type).then((function(t){var a=t.data.foods[0],n=e.props.completeFoodNutrients(a),r=e.props.completeFood(a,n);e.setState({food:r},(function(){e.setState({isReady:!0})}))}))}},{key:"render",value:function(){var e=this;return this.state.isReady?r.a.createElement("div",{className:"detailPage"},r.a.createElement(C,{resetFilter:this.props.resetFilter}),r.a.createElement("div",{className:"detailContainer"},r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"detailContent"},r.a.createElement("div",{className:"detailIntro"},r.a.createElement("div",{className:"introLeft"},r.a.createElement("div",{className:"detailImg"},r.a.createElement("img",{src:this.state.food.imgURL,alt:this.state.food.name})),r.a.createElement("div",{className:"detailDesc"},r.a.createElement("div",{className:"detailTitle"},r.a.createElement("h1",null," ",this.state.food.name)),r.a.createElement("div",{className:"detailDescription"},r.a.createElement("h2",null,"Description"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("p",null,r.a.createElement("span",{className:"nutrientName"},"Serving:")," ",this.state.food.serving," ",this.state.food.servingUnit," (",this.state.food.servingWeight,"g)"," ")),this.state.food.brand?r.a.createElement("li",null,r.a.createElement("p",null,"Brand: ",this.state.food.brand)):"")))),r.a.createElement("div",{className:"introRight"},r.a.createElement("div",{className:"detailButtons"},r.a.createElement("button",{title:"Add to Favourites","aria-label":"Add to Favourites",onClick:function(t){e.props.addToSaved(e.state.food,"userFavourites"),t.target.parentNode.blur()}},r.a.createElement(g.a,{icon:N.b})),r.a.createElement("button",{title:"Add to Compare","aria-label":"Add to Compare",onClick:function(t){e.props.addToSaved(e.state.food,"userCompared"),t.target.parentNode.blur()}},r.a.createElement(g.a,{icon:N.a}))))),r.a.createElement("div",{className:"detailNutrition"},r.a.createElement("h2",null,"Nutritional Facts"),r.a.createElement("div",{className:"detailNutritionFacts"},r.a.createElement("ul",{className:"nutrientList"},this.state.food.secondaryNutrients.map((function(e){return r.a.createElement("li",{key:e.name},r.a.createElement("div",{className:"nutrient"},r.a.createElement("div",{className:"nutrientName"},r.a.createElement("p",null,e.name)),r.a.createElement("div",{className:"nutrientUnit"},r.a.createElement("p",null,e.value," ",e.unit))))}))),r.a.createElement("ul",{className:"nutrientList"},this.state.food.mainNutrients.map((function(e){return r.a.createElement("li",{key:e.name},r.a.createElement("div",{className:"nutrient"},r.a.createElement("div",{className:"nutrientName"},r.a.createElement("p",null,e.name)),r.a.createElement("div",{className:"nutrientUnit"},r.a.createElement("p",null,e.value," ",e.unit))))}))))))))):r.a.createElement("div",{className:"detailPage"},r.a.createElement(C,null),r.a.createElement("div",{className:"detailContainer"},r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"spinner"},r.a.createElement(g.a,{icon:N.e})))))}}]),t}(n.Component);var j=function(e){return r.a.createElement("div",{className:"comparisonCard"},r.a.createElement("div",{className:"imageContainer"},r.a.createElement("img",{src:e.food.imgURL,alt:e.food.name})),r.a.createElement("h3",null,e.food.name),r.a.createElement("h4",null,"Nutritional Facts"),r.a.createElement("ul",null,e.food.secondaryNutrients.map((function(e){return r.a.createElement("li",{key:e.name},r.a.createElement("div",{className:"nutrient"},r.a.createElement("div",{className:"nutrientName"},e.name),r.a.createElement("div",{className:"nutrientUnit"},e.value," ",e.unit)))}))),r.a.createElement("h4",null,"Vitamins and Minerals"),r.a.createElement("ul",null,e.food.mainNutrients.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement("div",{className:"nutrient"},r.a.createElement("div",{className:"nutrientName"},e.name),r.a.createElement("div",{className:"nutrientUnit"},e.value," ",e.unit)))}))),r.a.createElement("button",{title:"Click to remove","aria-label":"Click to remove from Item Comparison",onClick:function(){e.removeItem(e.id,"userCompared")}},r.a.createElement(g.a,{className:"deleteIcon",icon:N.f})))},S=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"comparisonPage"},r.a.createElement(C,{resetFilter:this.props.resetFilter}),r.a.createElement("h1",{className:"pageTitle"},"Compare Items"),r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"comparisonContainer"},this.props.userCompared.map((function(t){return r.a.createElement(j,{key:t.key,id:t.key,food:t,removeItem:e.props.removeItem})})))))}}]),t}(n.Component),_=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.foodItem.nix_item_id?this.props.foodItem.nix_item_id:this.props.foodItem.food_name;e=encodeURI(e);var t=this.props.foodItem.nix_item_id?"branded":"common";return r.a.createElement(v.b,{className:"foodCardLink",to:"/food/".concat(t,"/").concat(e)},r.a.createElement("div",{className:"foodCard",title:"Click for details"},r.a.createElement("div",{className:"cardImage"},r.a.createElement("img",{src:this.props.foodItem.photo.thumb,alt:this.props.foodItem.food_name})),r.a.createElement("div",{className:"cardContent"},r.a.createElement("h2",{className:"cardTitle"},this.props.foodItem.nix_item_id?this.props.foodItem.brand_name:this.props.foodItem.food_name),this.props.foodItem.nix_item_id?r.a.createElement("h3",{className:"cardSubtitle"},this.props.foodItem.food_name):null)))}}]),t}(n.Component),T=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).typeCheck=function(){return(!1!==a.props.hasUserTyped||0!==a.props.foodItems.length)&&(!0===a.props.hasUserTyped&&0===a.props.foodItems.length)},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",{className:"foodContainer"},this.typeCheck()?r.a.createElement("div",{className:"noResults"},r.a.createElement("img",{src:"https://i.imgur.com/S81lkaK.png",alt:""}),r.a.createElement("p",null,"Sorry! We didn't find anything. Please try another search term.")):this.props.foodItems.map((function(e,t){return r.a.createElement(_,{key:t,foodItem:e})})))}}]),t}(n.Component),x=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"home"},r.a.createElement(C,{resetFilter:this.props.resetFilter}),r.a.createElement("div",{className:"pageContainer"},r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"searchBar"},r.a.createElement("div",{className:"input"},r.a.createElement("input",{type:"search",name:"search",id:"search",onChange:this.props.userSearch,placeholder:"What food are you looking for?"})),r.a.createElement("div",{className:"toggleBtns"},r.a.createElement("button",{className:"common"===this.props.type?"toggle toggleCommon toggleActive":"toggle toggleCommon",id:"common",onClick:this.props.foodTypeButtonClick},"Common"),r.a.createElement("button",{className:"branded"===this.props.type?"toggle toggleBranded toggleActive":"toggle toggleBranded",id:"branded",onClick:this.props.foodTypeButtonClick},"Branded"))),r.a.createElement(T,{foodItems:this.props.foodItems,hasUserTyped:this.props.hasUserTyped}))))}}]),t}(n.Component),U=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={theme:{SUCCESS:"success","SAVE FAILED":"failed"}},e}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state.theme[this.props.overall];return r.a.createElement("div",{className:"toasterBox "},r.a.createElement("div",{className:"toaster "+e},r.a.createElement("h1",null,this.props.overall),r.a.createElement("p",null," ",this.props.message)))}}]),t}(n.Component),A=a(32),D=a.n(A);D.a.initializeApp({apiKey:"AIzaSyCdy_v8Of--vsc5yPhbKDECOOHl3nlHIfo",authDomain:"nutrinav-97224.firebaseapp.com",databaseURL:"https://nutrinav-97224.firebaseio.com",projectId:"nutrinav-97224",storageBucket:"nutrinav-97224.appspot.com",messagingSenderId:"37824965367",appId:"1:37824965367:web:9c87ff57c94915ec9c01f2"});var L=D.a,w=(a(90),"0d45466c03d80039b01119cd195711a9"),M="ff87fb2a",B=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).getAllSaved=function(t){L.database().ref("".concat(t)).on("value",(function(a){var n=a.val(),r=[];for(var o in n)r.push({key:o,id:n[o].id,name:n[o].name,brand:n[o].brand,serving:n[o].serving,servingUnit:n[o].servingUnit,servingWeight:n[o].servingWeight,imgURL:n[o].imgURL,mainNutrients:n[o].mainNutrients,secondaryNutrients:n[o].secondaryNutrients});e.completeSaved(r,t)}))},e.completeSaved=function(t,a){var n;e.setState((n={},Object(c.a)(n,a,t),Object(c.a)(n,a+"Filt",t),n))},e.runToaster=function(t){var a=t.overall,n=t.message,r=t.duration;e.setState({toaster:{hidden:!1,message:n,overall:a}},(function(){return e.killToaster(r)}))},e.killToaster=function(t){setTimeout((function(){e.setState({toaster:{hidden:!0}})}),t)},e.addToSaved=function(t,a){var n="userCompared"===a?e.state.maxCompared:e.state.maxFavourites;e.isNotDuplicate(t.id,a)&&e.state[a].length<n?(L.database().ref("".concat(a)).push(t),e.runToaster({overall:"SUCCESS",message:"Your food (".concat(t.name,") has been saved."),duration:2500})):e.isNotDuplicate(t.id,a)?e.runToaster({overall:"SAVE FAILED",message:"Unable to add. The list is full",duration:2500}):e.runToaster({overall:"SAVE FAILED",message:"This food (".concat(t.name,") is already saved."),duration:2500})},e.isNotDuplicate=function(t,a){return 0===("userCompared"===a?Object(s.a)(e.state.userCompared):Object(s.a)(e.state.userFavourites)).filter((function(e){return e.id===t})).length},e.removeItem=function(t,a){L.database().ref(a).child(t).remove(),e.runToaster({overall:"SUCCESS",message:"The food item has been removed.",duration:2500})},e.getNutrients=function(){var t=[];E()({url:"https://trackapi.nutritionix.com/v2/utils/nutrients",method:"GET",responseType:"json",headers:{"x-app-key":w,"x-app-id":M,"x-remote-user-id":"0"}}).then((function(a){t=a.data;var n=e.state.targetNutrients.map((function(a){return{name:a.name,id:e.getNutrientID(a.name,t),unit:a.unit}}));e.setState({nutrients:n})}))},e.getNutrientID=function(e,t){var a=t.filter((function(t){return t.usda_nutr_desc.includes(e)}));return a.length>0?a[0].attr_id:""},e.getValue=function(e,t){var a=t.filter((function(t){return t.attr_id===e}));return a.length>0?a[0].value:0},e.othersToArray=function(e){var t=[];for(var a in e)t.push({name:a,value:e[a].value,unit:e[a].unit});return t},e.completeFood=function(t,a){var n={id:t.nix_item_id?t.nix_item_id:t.food_name,name:t.food_name,brand:t.brand_name,imgURL:t.photo.highres?t.photo.highres:t.photo.thumb,serving:Math.round(t.serving_qty),servingUnit:t.serving_unit,servingWeight:t.serving_weight_grams,mainNutrients:Object(s.a)(a),secondaryNutrients:{Calories:{value:Math.round(t.nf_calories),unit:"kcal"},Carbs:{value:Math.round(t.nf_total_carbohydrate),unit:"g"},Sodium:{value:Math.round(t.nf_sodium),unit:"mg"},Sugar:{value:Math.round(t.nf_sugars),unit:"g"},Protein:{value:Math.round(t.nf_protein),unit:"g"},Fat:{value:Math.round(t.nf_total_fat),unit:"g"},"Saturated Fat":{value:Math.round(t.nf_saturated_fat),unit:"g"},Fiber:{value:Math.round(t.nf_dietary_fiber),unit:"g"}}},r=n.secondaryNutrients;return n.secondaryNutrients=e.othersToArray(r),n},e.completeFoodNutrients=function(t){return e.state.nutrients.map((function(a){var n=e.getValue(a.id,t.full_nutrients);return{name:a.name,id:a.id,value:Math.round(n),unit:a.unit}}))},e.getDetails=function(e,t){var a="common"===t?"natural/nutrients":"search/item",n="common"===t?"POST":"GET",r="common"===t?{}:{nix_item_id:e},o="common"===t?{query:e}:{};return E()({url:"https://trackapi.nutritionix.com/v2/".concat(a),method:n,headers:{"x-app-key":w,"x-app-id":M,"x-remote-user-id":"0","content-type":"application/json"},data:o,params:r})},e.fetchFood=function(t){E()({url:"https://trackapi.nutritionix.com/v2/search/instant",method:"get",headers:{"x-app-key":w,"x-app-id":M},params:{query:t}}).then((function(t){e.setState({brandedFood:t.data.branded,commonFood:t.data.common,hasUserTyped:!0})}))},e.randomSearch=function(){var t=["corn","spinach","burger","broccoli"],a=Math.floor(Math.random()*t.length);e.fetchFood(t[a])},e.userSearch=function(t){var a=t.target.value;e.fetchFood(a)},e.foodTypeButtonClick=function(t){e.setState({type:t.target.id})},e.updateFilterString=function(t){var a=e.state.userFavourites.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}));e.setState({userFavouritesFilt:a})},e.resetFilter=function(){e.setState({filterString:"",userFavouritesFilt:e.state.userFavourites})},e.state={targetNutrients:[{name:"Vitamin A",unit:"IU"},{name:"Vitamin D",unit:"IU"},{name:"Vitamin B-6",unit:"mg"},{name:"Vitamin C",unit:"mg"},{name:"Vitamin E",unit:"mg"},{name:"Magnesium",unit:"mg"},{name:"Zinc",unit:"mg"},{name:"Iron",unit:"mg"}],commonFood:[],brandedFood:[],nutrients:[],userFavourites:[],userFavouritesFilt:[],filterString:"",userCompared:[],type:"common",maxCompared:3,maxFavourites:18,toaster:{hidden:!0},hasUserTyped:!1},e}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.getNutrients(),this.randomSearch(),this.getAllSaved("userCompared"),this.getAllSaved("userFavourites")}},{key:"render",value:function(){var e=this;return r.a.createElement(v.a,{basename:"/"},r.a.createElement("div",{className:"App"},r.a.createElement(h.a,{path:"/",exact:!0,render:function(){return r.a.createElement(x,{foodItems:"branded"===e.state.type?e.state.brandedFood:e.state.commonFood,userSearch:e.userSearch,foodTypeButtonClick:e.foodTypeButtonClick,type:e.state.type,resetFilter:e.resetFilter,hasUserTyped:e.state.hasUserTyped})}}),r.a.createElement(h.a,{path:"/favourites",render:function(){return r.a.createElement(k,{savedFoods:e.state.userFavouritesFilt,updateFilterString:e.updateFilterString,removeItem:e.removeItem,resetFilter:e.resetFilter})}}),r.a.createElement(h.a,{path:"/compare",render:function(){return r.a.createElement(S,{userCompared:e.state.userCompared,removeItem:e.removeItem,resetFilter:e.resetFilter})}}),r.a.createElement(h.a,{exact:!0,path:"/food/:type/:id",render:function(t){return r.a.createElement(O,{id:t.match.params.id,type:t.match.params.type,getDetails:e.getDetails,completeFoodNutrients:e.completeFoodNutrients,completeFood:e.completeFood,addToSaved:e.addToSaved,resetFilter:e.resetFilter})}}),r.a.createElement("div",{className:this.state.toaster.hidden?"toasterContainer hide":"toasterContainer show"},r.a.createElement(U,{overall:this.state.toaster.overall,message:this.state.toaster.message}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[47,1,2]]]);
//# sourceMappingURL=main.fd6f1e83.chunk.js.map