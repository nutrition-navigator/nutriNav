(this["webpackJsonpnutri-nav"]=this["webpackJsonpnutri-nav"]||[]).push([[0],{44:function(e,t,a){e.exports=a.p+"static/media/nutriNavLogo.ba2638de.svg"},47:function(e,t,a){e.exports=a(91)},52:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(42),i=a.n(o),s=(a(52),a(26)),c=a(43),m=a(3),l=a(4),u=a(6),d=a(5),p=a(7),v=a(12),h=a(16),f=a(19),E=a.n(f),g=a(21),N=a(22),b=a(44),y=a.n(b),C=function(e){function t(){return Object(m.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"navigation"},r.a.createElement("div",{className:"wrapper"},r.a.createElement("nav",null,r.a.createElement("ul",{className:"navContainer"},r.a.createElement("div",{className:"navList"},r.a.createElement("li",{className:"navItem"},r.a.createElement(v.c,{activeClassName:"activeNav",to:"/",exact:!0},r.a.createElement(g.a,{icon:N.c}))),r.a.createElement("li",{className:"navItem"},r.a.createElement(v.c,{activeClassName:"activeNav",to:"/favourites"},r.a.createElement(g.a,{icon:N.b})))),r.a.createElement("div",{className:"navList"},r.a.createElement("li",{className:"navLogo"},r.a.createElement(v.c,{activeClassName:"activeNav",to:"/",exact:!0},r.a.createElement("img",{src:y.a,alt:""})))),r.a.createElement("div",{className:"navList"},r.a.createElement("li",{className:"nav-icon navItem"},r.a.createElement(v.c,{activeClassName:"activeNav",to:"/",exact:!0},r.a.createElement(g.a,{icon:N.d}))),r.a.createElement("li",{className:"nav-icon navItem"},r.a.createElement(v.c,{activeClassName:"activeNav",to:"/compare"}," ",r.a.createElement(g.a,{icon:N.a}))))))))}}]),t}(n.Component),I=function(e){function t(){return Object(m.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.foodItem.id;t=encodeURI(t);var a=this.props.foodItem.brand?"branded":"common";return console.log(a),r.a.createElement(v.b,{to:"/food/".concat(a,"/").concat(t)},r.a.createElement("div",{className:"foodCard"},r.a.createElement("div",{className:"cardImage"},r.a.createElement("img",{src:this.props.foodItem.imgURL,alt:this.props.foodItem.name})),r.a.createElement("div",{className:"cardContent"},r.a.createElement("h2",{className:"cardTitle"},this.props.foodItem.brand?this.props.foodItem.brand:this.props.foodItem.name),this.props.foodItem.brand?r.a.createElement("h3",{className:"cardSubtitle"},this.props.foodItem.name):null,r.a.createElement("button",{onClick:function(){e.props.removeItem(e.props.foodItem.key,"userFavourites")}},"REMOVE"))))}}]),t}(n.Component),O=function(e){function t(){return Object(m.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"foodContainer"},this.props.foodItems.map((function(t,a){return r.a.createElement(I,{removeItem:e.props.removeItem,key:a,foodItem:t})})))}}]),t}(n.Component),j=function(e){function t(){return Object(m.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"favourites"},r.a.createElement(C,null),r.a.createElement("div",{className:"pageContainer"},r.a.createElement("div",{className:"wrapper"},r.a.createElement("h1",{className:"pageTitle"},"Saved Items"),r.a.createElement(O,{foodItems:this.props.savedFoods,removeItem:this.props.removeItem}))))}}]),t}(n.Component),k=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={food:{},foodType:a.props.type,isReady:!1},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.getDetails(this.props.id,this.props.type).then((function(t){var a=t.data.foods[0],n=e.props.completeFoodNutrients(a),r=e.props.completeFood(a,n);e.setState({food:r},(function(){e.setState({isReady:!0})}))}))}},{key:"render",value:function(){var e=this;return this.state.isReady?r.a.createElement("div",{className:"detailPage"},r.a.createElement(C,null),r.a.createElement("div",{className:"detailContainer"},r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"detailContent"},r.a.createElement("div",{className:"detailIntro"},r.a.createElement("div",{className:"detailImg"},r.a.createElement("img",{src:this.state.food.imgURL,alt:this.state.food.name})),r.a.createElement("div",{className:"detailDesc"},r.a.createElement("div",{className:"detailTitle"},r.a.createElement("h1",null," ",this.state.food.name)),r.a.createElement("div",{className:"detailDescription"},r.a.createElement("h2",null,"Description"),r.a.createElement("ul",null,r.a.createElement("li",null,"Serving: ",this.state.food.serving," ",this.state.food.servingUnit," (",this.state.food.servingWeight,"g)"," "),r.a.createElement("li",null,"Raw State: ",this.state.food.isRaw," "),this.state.food.brand?r.a.createElement("li",null," Brand: ",this.state.food.brand," "):"")))),r.a.createElement("div",{className:"detailNutrition"},r.a.createElement("h2",null,"Nutritional Facts"),r.a.createElement("div",{className:"detailNutritionFacts"},r.a.createElement("ul",{className:"nutrientList"},this.state.food.secondaryNutrients.map((function(e){return r.a.createElement("li",{key:e.name},r.a.createElement("div",{className:"nutrient"},r.a.createElement("div",{className:"nutrientName"},e.name),r.a.createElement("div",{className:"nutrientUnit"},e.value,e.unit)))}))),r.a.createElement("ul",{className:"nutrientList"},this.state.food.mainNutrients.map((function(e){return r.a.createElement("li",{key:e.name},r.a.createElement("div",{className:"nutrient"},r.a.createElement("div",{className:"nutrientName"},e.name),r.a.createElement("div",{className:"nutrientUnit"},e.value,e.unit)))})))))))),r.a.createElement("div",{className:"detailControl"},r.a.createElement("button",{onClick:function(){e.props.addToSaved(e.state.food,"userCompared")}}," ","Add to Compare"," "),r.a.createElement("button",{onClick:function(){e.props.addToSaved(e.state.food,"userFavourites")}}," ","Add to Favourites"," "))):"future loader"}}]),t}(n.Component);var _=function(e){return r.a.createElement("div",{className:"comparisonCard"},r.a.createElement("div",{className:"imageContainer"},r.a.createElement("img",{src:e.food.imgURL,alt:e.food.name})),r.a.createElement("h3",null,e.food.name),r.a.createElement("h4",null,"Nutritional Facts"),r.a.createElement("ul",null,e.food.secondaryNutrients.map((function(e){return r.a.createElement("li",{key:e.name},r.a.createElement("div",{className:"nutrient"},r.a.createElement("div",{className:"nutrientName"},e.name),r.a.createElement("div",{className:"nutrientUnit"},e.value,e.unit)))}))),r.a.createElement("h4",null,"Vitamins and Minerals"),r.a.createElement("ul",null,e.food.mainNutrients.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement("div",{className:"nutrient"},r.a.createElement("div",{className:"nutrientName"},e.name),r.a.createElement("div",{className:"nutrientUnit"},e.value,e.unit)))}))),r.a.createElement("button",{onClick:function(){e.removeItem(e.id,"userCompared")}},"REMOVE"))},S=function(e){function t(){return Object(m.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"comparisonPage"},r.a.createElement(C,null),r.a.createElement("h1",{className:"pageTitle"},"Compare Items"),r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"comparisonContainer"},this.props.userCompared.map((function(t){return r.a.createElement(_,{key:t.key,id:t.key,food:t,removeItem:e.props.removeItem})})))))}}]),t}(n.Component),F=(n.Component,function(e){function t(){return Object(m.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.foodItem.nix_item_id?this.props.foodItem.nix_item_id:this.props.foodItem.food_name;e=encodeURI(e);var t=this.props.foodItem.nix_item_id?"branded":"common";return r.a.createElement(v.b,{to:"/food/".concat(t,"/").concat(e)},r.a.createElement("div",{className:"foodCard"},r.a.createElement("div",{className:"cardImage"},r.a.createElement("img",{src:this.props.foodItem.photo.thumb,alt:this.props.foodItem.food_name})),r.a.createElement("div",{className:"cardContent"},r.a.createElement("h2",{className:"cardTitle"},this.props.foodItem.nix_item_id?this.props.foodItem.brand_name:this.props.foodItem.food_name),this.props.foodItem.nix_item_id?r.a.createElement("h3",{className:"cardSubtitle"},this.props.foodItem.food_name):null)))}}]),t}(n.Component)),x=function(e){function t(){return Object(m.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",{className:"foodContainer"},this.props.foodItems.map((function(e,t){return r.a.createElement(F,{key:t,foodItem:e})})))}}]),t}(n.Component),T=function(e){function t(){return Object(m.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"home"},r.a.createElement(C,null),r.a.createElement("div",{className:"pageContainer"},r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"searchBar"},r.a.createElement("div",{className:"input"},r.a.createElement("input",{type:"search",name:"search",id:"search",onChange:this.props.userSearch,placeholder:"What food are you looking for?"})),r.a.createElement("div",{className:"toggleBtns"},r.a.createElement("button",{className:"toggle toggleCommon",id:"common",onClick:this.props.foodTypeButtonClick},"Common"),r.a.createElement("button",{className:"toggle toggleBranded",id:"branded",onClick:this.props.foodTypeButtonClick},"Branded"))),r.a.createElement(x,{foodItems:this.props.foodItems}))))}}]),t}(n.Component),M=function(e){function t(){return Object(m.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:this.props.hidden?"toasterContainer hidden":"toasterContainer show"},r.a.createElement("div",{className:"toaster "+this.props.color},r.a.createElement("h1",null,this.props.overall),r.a.createElement("p",null," ",this.props.message)))}}]),t}(n.Component),U=a(31),w=a.n(U);w.a.initializeApp({apiKey:"AIzaSyCdy_v8Of--vsc5yPhbKDECOOHl3nlHIfo",authDomain:"nutrinav-97224.firebaseapp.com",databaseURL:"https://nutrinav-97224.firebaseio.com",projectId:"nutrinav-97224",storageBucket:"nutrinav-97224.appspot.com",messagingSenderId:"37824965367",appId:"1:37824965367:web:9c87ff57c94915ec9c01f2"});var D=w.a,R=(a(90),"0d45466c03d80039b01119cd195711a9"),B="ff87fb2a",L=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).getAllSaved=function(t){D.database().ref("".concat(t)).on("value",(function(a){var n=a.val(),r=[];for(var o in n)r.push({key:o,id:n[o].id,name:n[o].name,brand:n[o].brand,serving:n[o].serving,servingUnit:n[o].servingUnit,servingWeight:n[o].servingWeight,imgURL:n[o].imgURL,mainNutrients:n[o].mainNutrients,secondaryNutrients:n[o].secondaryNutrients});e.completeSaved(r,t)}))},e.completeSaved=function(t,a){e.setState(Object(c.a)({},a,t))},e.runToaster=function(e,t,a){},e.addToSaved=function(t,a){var n="userCompared"===a?e.state.maxCompared:e.state.maxFavourites;(console.log("addToSaved()","Max: ",n,"state length: ",e.state[a].length),e.isNotDuplicate(t.id,a)&&e.state[a].length<n)&&D.database().ref("".concat(a)).push(t)},e.isNotDuplicate=function(t,a){return 0===("userCompared"===a?Object(s.a)(e.state.userCompared):Object(s.a)(e.state.userFavourites)).filter((function(e){return e.id===t})).length},e.getNutrients=function(){var t=[];E()({url:"https://trackapi.nutritionix.com/v2/utils/nutrients",method:"GET",responseType:"json",headers:{"x-app-key":R,"x-app-id":B,"x-remote-user-id":"0"}}).then((function(a){t=a.data;var n=e.state.targetNutrients.map((function(a){return{name:a.name,id:e.getNutrientID(a.name,t),unit:a.unit}}));e.setState({nutrients:n})}))},e.getNutrientID=function(e,t){var a=t.filter((function(t){return t.usda_nutr_desc.includes(e)}));return a.length>0?a[0].attr_id:""},e.getValue=function(e,t){var a=t.filter((function(t){return t.attr_id===e}));return a.length>0?a[0].value:0},e.othersToArray=function(e){var t=[];for(var a in e)t.push({name:a,value:e[a].value,unit:e[a].unit});return t},e.completeFood=function(t,a){var n={id:t.nix_item_id?t.nix_item_id:t.food_name,name:t.food_name,brand:t.brand_name,imgURL:t.photo.highres?t.photo.highres:t.photo.thumb,serving:Math.round(t.serving_qty),servingUnit:t.serving_unit,servingWeight:t.serving_weight_grams,mainNutrients:Object(s.a)(a),secondaryNutrients:{Calories:{value:Math.round(t.nf_calories),unit:"kcal"},Carbs:{value:Math.round(t.nf_total_carbohydrate),unit:"g"},Sodium:{value:Math.round(t.nf_sodium),unit:"mg"},Sugar:{value:Math.round(t.nf_sugars),unit:"g"},Protein:{value:Math.round(t.nf_protein),unit:"g"},Fat:{value:Math.round(t.nf_total_fat),unit:"g"},"Saturated Fat":{value:Math.round(t.nf_saturated_fat),unit:"g"},Fiber:{value:Math.round(t.nf_dietary_fiber),unit:"g"}}},r=n.secondaryNutrients;return n.secondaryNutrients=e.othersToArray(r),n},e.completeFoodNutrients=function(t){return e.state.nutrients.map((function(a){var n=e.getValue(a.id,t.full_nutrients);return{name:a.name,id:a.id,value:Math.round(n),unit:a.unit}}))},e.getDetails=function(e,t){var a="common"===t?"natural/nutrients":"search/item",n="common"===t?"POST":"GET",r="common"===t?{}:{nix_item_id:e},o="common"===t?{query:e}:{};return E()({url:"https://trackapi.nutritionix.com/v2/".concat(a),method:n,headers:{"x-app-key":R,"x-app-id":B,"x-remote-user-id":"0","content-type":"application/json"},data:o,params:r})},e.fetchFood=function(t){E()({url:"https://trackapi.nutritionix.com/v2/search/instant",method:"get",headers:{"x-app-key":R,"x-app-id":B},params:{query:t}}).then((function(t){e.setState({brandedFood:t.data.branded,commonFood:t.data.common})}))},e.randomSearch=function(){var t=Math.floor(4*Math.random());e.fetchFood(["corn","cheese","spinach","big mac"][t])},e.userSearch=function(t){var a=t.target.value;e.fetchFood(a)},e.foodTypeButtonClick=function(t){e.setState({type:t.target.id})},e.killToaster=function(t){setTimeout((function(){e.setState({toaster:{hidden:!0}})}),t)},e.removeItem=function(e,t){D.database().ref(t).child(e).remove()},e.state={targetNutrients:[{name:"Vitamin A",unit:"IU"},{name:"Vitamin D",unit:"IU"},{name:"Vitamin B-6",unit:"mg"},{name:"Vitamin C",unit:"mg"},{name:"Vitamin E",unit:"mg"},{name:"Magnesium",unit:"mg"},{name:"Zinc",unit:"mg"},{name:"Iron",unit:"mg"}],commonFood:[],brandedFood:[],nutrients:[],userFavourites:[],userCompared:[],type:"common",maxCompared:3,maxFavourites:9,toaster:{hidden:!0}},e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getNutrients(),this.randomSearch(),this.getAllSaved("userCompared"),this.getAllSaved("userFavourites")}},{key:"render",value:function(){var e=this;return r.a.createElement(v.a,{basename:"/"},r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(h.a,{path:"/",exact:!0,render:function(){return r.a.createElement(T,{foodItems:"branded"===e.state.type?e.state.brandedFood:e.state.commonFood,userSearch:e.userSearch,foodTypeButtonClick:e.foodTypeButtonClick})}}),r.a.createElement(h.a,{path:"/favourites",render:function(){return r.a.createElement(j,{savedFoods:e.state.userFavourites,removeItem:e.removeItem})}}),r.a.createElement(h.a,{path:"/compare",render:function(){return r.a.createElement(S,{userCompared:e.state.userCompared,removeItem:e.removeItem})}}),r.a.createElement(h.a,{exact:!0,path:"/food/:type/:id",render:function(t){return r.a.createElement(k,{id:t.match.params.id,type:t.match.params.type,getDetails:e.getDetails,completeFoodNutrients:e.completeFoodNutrients,completeFood:e.completeFood,addToSaved:e.addToSaved})}})),r.a.createElement("div",{className:this.state.toaster.hidden?"toasterContainer hidden":"toasterContainer"},r.a.createElement(M,{overall:this.state.toaster.overall,message:this.state.toaster.message}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[47,1,2]]]);
//# sourceMappingURL=main.6ce423b9.chunk.js.map